import{A as J,R as F,f as G,c as p,w as U,B as Q,aN as X,L as Y,C as Z,b as v,l as f,S as ee,u as j,T as x,U as y,E as A,V as N,o as m,v as u,W as te,d as g,e as n,D as ae,j as h,y as ne,i as se,K as oe,z as _,h as w,J as re,s as ce}from"./SjwxYqim.js";import{_ as le}from"./DYuuJ-d-.js";import{d as ie,a as ue,_ as me,b as _e,c as de,e as pe}from"./Dycg4KYN.js";import{f as fe}from"./BRDhrT-C.js";import"./1m1goCJg.js";import"./B-bVB8KN.js";import"./iik6CYzq.js";function B(r,a,s=0){const c={title:"label",path:"to"},t=Object.keys(r).reduce((l,i)=>{if(r[i]){const d=c[i]||i;l[d]=r[i]}return l},{});return Array.isArray(r.children)?t.children=r.children.map(l=>B(l,a,s+1)):t.children=[],t}function ge(r,a){return r.map(s=>B(s,a))}function I(r,a,s){return!r?.length||!a?[]:r.reduce((c,t)=>(a&&(a+"/").startsWith(t.path+"/")&&((a!==t.path||s?.current||s?.indexAsChild)&&c.push(t),t.children&&c.push(...I(t.children.filter(l=>l.path!==t.path||l.path===a&&s?.current&&s?.indexAsChild),a,s))),c),[])}const he={class:"flex flex-col gap-3 mt-8"},ve={class:"flex text-xs text-muted items-center justify-center gap-2"},xe={key:0},ye={key:1},we={key:2},be={class:"text-4xl text-center font-medium max-w-3xl mx-auto mt-4"},Ce={class:"text-muted text-center max-w-2xl mx-auto"},$e={class:"flex items-center justify-center gap-2 mt-2"},Pe=J({__name:"[...slug]",async setup(r){let a,s;const c=F(),{locale:t,t:l}=G(),i=p(()=>Array.isArray(c.params.slug)?c.params.slug:[c.params.slug]),d=p(()=>x(y(t.value,...i.value))),R=p(()=>`blog_${t.value}`),{data:e}=([a,s]=U(async()=>j(d.value,async()=>{const o=await A(R.value).path(`/${t.value}/blog/${i.value}`).first();return!o&&t.value!=="en"?await A("blog_en").path(x(y("en",...i.value))).first():o},{watch:[t,()=>c.fullPath]})),a=await a,s(),a);if(!e.value)throw Q({statusCode:404,statusMessage:l("error.title"),fatal:!0});const{data:P}=([a,s]=U(async()=>j(`${d.value}-surround`,async()=>{const o=await N(`blog_${t.value}`,d.value,{fields:["description"]});return!o&&t.value!=="en"?await N("blog_en",x(y("en",...i.value)),{fields:["description"]}):o},{watch:[t,()=>c.fullPath]})),a=await a,s(),a),D=X("navigation",Y([])),S=p(()=>D.value.find(o=>o.path===`${t.value}/blog`)?.children||[]),V=p(()=>ge(I(S?.value,e.value?.path)).map(({icon:o,...$})=>$));e.value.image?ie({url:e.value.image}):ue("Blog",{headline:V.value.map(o=>o.label).join(" > ")},{});const b=e.value?.seo?.title||e.value?.title,C=e.value?.seo?.description||e.value?.description;return Z({title:b,meta:[{name:"description",content:C},{property:"og:description",content:C},{property:"og:title",content:b},{name:"twitter:card",content:"summary_large_image"}]}),(o,$)=>{const L=oe,E=ne,M=re,O=le,k=_e,q=de,K=pe,T=me,W=ae,z=te,H=ee;return m(),v(H,{class:"mt-20 px-2"},{default:f(()=>[u(z,{class:"relative min-h-screen"},{default:f(()=>[n(e)?(m(),v(W,{key:0},{default:f(()=>[u(E,{to:"/blog",class:"text-sm flex items-center gap-1"},{default:f(()=>[u(L,{name:"lucide:chevron-left"}),se(" "+_(n(l)("blog.title")),1)]),_:1}),h("div",he,[h("div",ve,[n(e).date?(m(),w("span",xe,_(("formatDate"in o?o.formatDate:n(fe))(n(e).date)),1)):g("",!0),n(e).date&&n(e).minRead?(m(),w("span",ye," - ")):g("",!0),n(e).minRead?(m(),w("span",we,_(n(e).minRead)+" "+_(n(l)("blog.minRead")),1)):g("",!0)]),u(M,{src:n(e).image,alt:n(e).title,class:"rounded-lg w-full h-75 object-cover object-center"},null,8,["src","alt"]),h("h1",be,_(n(e).title),1),h("p",Ce,_(n(e).description),1),h("div",$e,[u(O,ce({orientation:"vertical",color:"neutral",variant:"outline",class:"justify-center items-center text-center"},n(e).author),null,16)])]),u(T,{class:"max-w-3xl mx-auto"},{default:f(()=>[n(e).body?(m(),v(k,{key:0,value:n(e)},null,8,["value"])):g("",!0),u(q,{type:"article"}),u(K,{surround:n(P)},null,8,["surround"])]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})}}});export{Pe as default};
