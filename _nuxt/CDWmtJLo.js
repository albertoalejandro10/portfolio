import{z as h,bg as Z,m as ee,bh as te,bi as L,bj as ne,K as C,H as $,h as m,I as a,n as x,bk as oe,bl as B,_ as se,y as H,bm as ae,ak as A,c as S,e as p,d as I,w as P,aE as N,f as b,at as E,am as q,t as j,L as V,P as z,F as re,bn as ie,C as le,q as ce,aQ as D,aT as ue,b4 as de,r as pe,aU as me,bo as fe,aR as U,aS as ge,bp as _e,bf as he,aV as ve,b2 as ye,an as be}from"#entry";import{_ as Pe}from"./D3Fpk2kf.js";import{h as M,M as xe}from"./CAxy3Ozb.js";import"./iik6CYzq.js";function G(s,o,t=0){const u={title:"label",path:"to"},e=Object.keys(s).reduce((c,d)=>{if(s[d]){const k=u[d]||d;c[k]=s[d]}return c},{});return Array.isArray(s.children)?e.children=s.children.map(c=>G(c,o,t+1)):e.children=[],e}function Ce(s,o){return s.map(t=>G(t,o))}const K=["ProseA","ProseBlockquote","ProseCode","ProseEm","ProseH1","ProseH2","ProseH3","ProseH4","ProseH5","ProseH6","ProseHr","ProseImg","ProseLi","ProseOl","ProseP","ProsePre","ProseScript","ProseStrong","ProseTable","ProseTbody","ProseTd","ProseTh","ProseThead","ProseTr","ProseUl","ProseAccordion","ProseAccordionItem","ProseBadge","ProseCallout","ProseCard","ProseCardGroup","ProseCodeCollapse","ProseCodeGroup","ProseCodeIcon","ProseCodePreview","ProseCodeTree","ProseCollapsible","ProseField","ProseFieldGroup","ProseIcon","ProseKbd","ProseSteps","ProseTabs","ProseTabsItem","ProseCaution","ProseNote","ProseTip","ProseWarning","Icon"],W=[],ke=Object.freeze(Object.defineProperty({__proto__:null,globalComponents:K,localComponents:W},Symbol.toStringTag,{value:"Module"})),Te={__name:"ContentRenderer",props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},prose:{type:Boolean,default:void 0},class:{type:[String,Object],default:void 0},unwrap:{type:[Boolean,String],default:!1}},setup(s){const o=["render","ssrRender","__ssrInlineRender"],t=s,u=!1,e=h(()=>{let n=t.value.body||t.value;return t.excerpt&&t.value.excerpt&&(n=t.value.excerpt),n.type==="minimal"||n.type==="minimark"?Z({value:n.value}):n}),c=h(()=>!e.value?.children?.length),d=h(()=>{const{body:n,excerpt:i,...l}=t.value;return{...l,...t.data}}),k=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(n=>[n,`prose-${n}`])),{mdc:r}=ee().public||{},T=h(()=>({...r?.components?.prose&&t.prose!==!1?k:{},...r?.components?.map||{},...te(t.data?.mdc?.components||{}),...t.components})),w=h(()=>e.value?v(e.value,{tags:T.value}):{});function O(n){let i=n;if(typeof n=="string"){if(M.includes(n))return n;if(K.includes(L(n))?i=oe(n,!1):W.includes(L(n))&&(i=B(()=>se(()=>Promise.resolve().then(()=>ke),void 0,import.meta.url).then(f=>{const g=f[L(n)];return g?g():void 0}))),typeof i=="string")return i}if(!i)return i;const l=i;return"__asyncLoader"in l?l:"setup"in l?B(()=>Promise.resolve(l)):l}function v(n,i){if(!n)return;const l=Array.from(new Set(y(n,i))),_={};for(const[f,g]of l)if(!_[f]){if(typeof g=="object"&&o.some(F=>Object.hasOwnProperty.call(g,F))){_[f]=g;continue}_[f]=O(g)}return _}function y(n,i){const l=n.tag;if(n.type==="text"||l==="binding"||n.type==="comment")return[];const _=R(n,i.tags),f=[];n.type!=="root"&&!M.includes(_)&&f.push([l,_]);for(const g of n.children||[])f.push(...y(g,i));return f}function R(n,i){const l=n.tag;return!l||typeof n.props?.__ignoreMap<"u"?l:i[l]||i[L(l)]||i[ne(n.tag)]||l}return(n,i)=>c.value?$(n.$slots,"empty",{key:1,body:e.value,data:d.value,dataContentId:a(u)?s.value.id:void 0}):(m(),C(xe,{key:0,body:e.value,data:d.value,class:x(t.class),tag:t.tag,prose:t.prose,unwrap:t.unwrap,components:w.value,"data-content-id":a(u)?s.value.id:void 0},null,8,["body","data","class","tag","prose","unwrap","components","data-content-id"]))}},we={slots:{root:"grid grid-cols-1 sm:grid-cols-2 gap-8",link:["group block px-6 py-8 rounded-lg border border-default hover:bg-elevated/50 focus-visible:outline-primary","transition-colors"],linkLeading:["inline-flex items-center rounded-full p-1.5 bg-elevated group-hover:bg-primary/10 ring ring-accented mb-4 group-hover:ring-primary/50","transition"],linkLeadingIcon:["size-5 shrink-0 text-highlighted group-hover:text-primary","transition-[color,translate]"],linkTitle:"font-medium text-[15px] text-highlighted mb-1 truncate",linkDescription:"text-sm text-muted line-clamp-2"},variants:{direction:{left:{linkLeadingIcon:["group-active:-translate-x-0.5"]},right:{link:"text-right",linkLeadingIcon:["group-active:translate-x-0.5"]}}}},Ie={key:1,class:"hidden lg:block"},$e=Object.assign({inheritAttrs:!1},{__name:"UContentSurround",props:{as:{type:null,required:!1},prevIcon:{type:[String,Object],required:!1},nextIcon:{type:[String,Object],required:!1},surround:{type:Array,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(s){const o=s,t=H(),[u,e]=ae({props:{link:Object,icon:String,direction:String}}),c=h(()=>A({extend:A(we),...t.ui?.contentSurround||{}})());return(d,k)=>(m(),S(re,null,[p(a(u),null,{default:P(({link:r,icon:T,direction:w})=>[r?(m(),C(N,{key:0,to:r.path,raw:"",class:x(c.value.link({class:[o.ui?.link,r.ui?.link,r.class],direction:w}))},{default:P(()=>[$(d.$slots,"link",{link:r},()=>[b("div",{class:x(c.value.linkLeading({class:[o.ui?.linkLeading,r.ui?.linkLeading]}))},[$(d.$slots,"link-leading",{link:r},()=>[p(E,{name:r.icon||T,class:x(c.value.linkLeadingIcon({class:[o.ui?.linkLeadingIcon,r.ui?.linkLeadingIcon],direction:w}))},null,8,["name","class"])])],2),b("p",{class:x(c.value.linkTitle({class:[o.ui?.linkTitle,r.ui?.linkTitle]}))},[$(d.$slots,"link-title",{link:r},()=>[q(j(r.title),1)])],2),b("p",{class:x(c.value.linkDescription({class:[o.ui?.linkDescription,r.ui?.linkDescription]}))},[$(d.$slots,"link-description",{link:r},()=>[q(j(r.description),1)])],2)])]),_:2},1032,["to","class"])):(m(),S("span",Ie,"Â "))]),_:3}),s.surround?(m(),C(a(z),V({key:0,as:s.as},d.$attrs,{class:c.value.root({class:[o.ui?.root,o.class]})}),{default:P(()=>[p(a(e),{link:s.surround[0],icon:s.prevIcon||a(t).ui.icons.arrowLeft,direction:"left"},null,8,["link","icon"]),p(a(e),{link:s.surround[1],icon:s.nextIcon||a(t).ui.icons.arrowRight,direction:"right"},null,8,["link","icon"])]),_:1},16,["as","class"])):I("",!0)],64))}}),je={base:"mt-8 pb-24 space-y-12"},Se={__name:"UPageBody",props:{as:{type:null,required:!1},class:{type:null,required:!1}},setup(s){const o=s,t=H(),u=h(()=>A({extend:A(je),...t.ui?.pageBody||{}}));return(e,c)=>(m(),C(a(z),{as:s.as,class:x(u.value({class:o.class}))},{default:P(()=>[$(e.$slots,"default")]),_:3},8,["as","class"]))}};function Le(s,o="Copied to clipboard"){const t=ie();navigator.clipboard.writeText(s).then(()=>{t.add({title:o,color:"success",icon:"i-lucide-check-circle"})})}function Q(s,o,t){return!s?.length||!o?[]:s.reduce((u,e)=>(o&&(o+"/").startsWith(e.path+"/")&&((o!==e.path||t?.current||t?.indexAsChild)&&u.push(e),e.children&&u.push(...Q(e.children.filter(c=>c.path!==e.path||c.path===o&&t?.current&&t?.indexAsChild),o,t))),u),[])}const Ae={class:"flex flex-col gap-3 mt-8"},Oe={class:"flex text-xs text-muted items-center justify-center gap-2"},Re={key:0},Fe={key:1},qe={key:2},Be={class:"text-4xl text-center font-medium max-w-3xl mx-auto mt-4"},De={class:"text-muted text-center max-w-2xl mx-auto"},Ue={class:"flex items-center justify-center gap-2 mt-2"},Me={class:"flex items-center justify-end gap-2 text-sm text-muted"},Ge=le({__name:"[...slug]",async setup(s){let o,t;const u=ce(),{data:e}=([o,t]=D(()=>U(u.path,()=>ge("blog").path(u.path).first(),"$DquttgHoet")),o=await o,t(),o);if(!e.value)throw ue({statusCode:404,statusMessage:"Page not found",fatal:!0});const{data:c}=([o,t]=D(()=>U(`${u.path}-surround`,()=>_e("blog",u.path,{fields:["description"]}))),o=await o,t(),o),d=de("navigation",pe([])),k=h(()=>d.value.find(v=>v.path==="/blog")?.children||[]);h(()=>Ce(Q(k?.value,e.value?.path)).map(({icon:v,...y})=>y)),e.value.image;const r=e.value?.seo?.title||e.value?.title,T=e.value?.seo?.description||e.value?.description;me({title:r,description:T,ogDescription:T,ogTitle:r});const w=h(()=>`${window?.location}`),O=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(v,y)=>{const R=E,n=N,i=ye,l=Pe,_=Te,f=be,g=$e,F=Se,J=ve,X=he,Y=fe;return m(),C(Y,{class:"mt-20 px-2"},{default:P(()=>[p(X,{class:"relative min-h-screen"},{default:P(()=>[a(e)?(m(),C(J,{key:0},{default:P(()=>[p(n,{to:"/blog",class:"text-sm flex items-center gap-1"},{default:P(()=>[p(R,{name:"lucide:chevron-left"}),y[1]||(y[1]=q(" Blog ",-1))]),_:1}),b("div",Ae,[b("div",Oe,[a(e).date?(m(),S("span",Re,j(O(a(e).date)),1)):I("",!0),a(e).date&&a(e).minRead?(m(),S("span",Fe," - ")):I("",!0),a(e).minRead?(m(),S("span",qe,j(a(e).minRead)+" MIN READ ",1)):I("",!0)]),p(i,{src:a(e).image,alt:a(e).title,class:"rounded-lg w-full h-[300px] object-cover object-center"},null,8,["src","alt"]),b("h1",Be,j(a(e).title),1),b("p",De,j(a(e).description),1),b("div",Ue,[p(l,V({orientation:"vertical",color:"neutral",variant:"outline",class:"justify-center items-center text-center"},a(e).author),null,16)])]),p(F,{class:"max-w-3xl mx-auto"},{default:P(()=>[a(e).body?(m(),C(_,{key:0,value:a(e)},null,8,["value"])):I("",!0),b("div",Me,[p(f,{size:"sm",variant:"link",color:"neutral",label:"Copy link",onClick:y[0]||(y[0]=He=>("copyToClipboard"in v?v.copyToClipboard:a(Le))(a(w),"Article link copied to clipboard"))})]),p(g,{surround:a(c)},null,8,["surround"])]),_:1})]),_:1})):I("",!0)]),_:1})]),_:1})}}});export{Ge as default};
