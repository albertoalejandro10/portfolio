import{A as W,ar as q,c as C,b as y,o as h,l as m,r as M,s as E,a9 as z,aR as U,aS as j,k as B,aT as T,L as N,t as $,S as V,aU as O,m as F,T as H,aV as X,aW as Z,h as L,v as d,e as i,I as A,d as R,n as D,F as G}from"./v2VD05I1.js";import{D as J,a as K,b as Q}from"./ByjYl1eq.js";import{u as Y,f as ee,a as te,m as x,M as S}from"./DiatA7ZJ.js";function ae(r){const t=new WeakMap,g=Y();function w(l){if(r.mode!=="popLayout")return;const a=l.element,u=a.offsetParent,f=u instanceof HTMLElement&&u.offsetWidth||0,o={height:a.offsetHeight||0,width:a.offsetWidth||0,top:a.offsetTop,left:a.offsetLeft,right:0};o.right=f-o.width-o.left;const s=r.anchorX==="left"?`left: ${o.left}`:`right: ${o.right}`;l.element.dataset.motionPopId=l.id;const e=document.createElement("style");g.value.nonce&&(e.nonce=g.value.nonce),t.set(l,e),document.head.appendChild(e),e.sheet&&e.sheet.insertRule(`
    [data-motion-pop-id="${l.id}"] {
      position: absolute !important;
      width: ${o.width}px !important;
      height: ${o.height}px !important;
      top: ${o.top}px !important;
      ${s}px !important;
      }
      `)}function v(l){const a=t.get(l);a&&(t.delete(l),ee.render(()=>{document.head.removeChild(a)}))}return{addPopStyle:w,removePopStyle:v,styles:t}}const ne=W({name:"AnimatePresence",inheritAttrs:!0,__name:"AnimatePresence",props:{mode:{default:"sync"},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:"left"}},setup(r){const t=r;te(t);const{addPopStyle:g,removePopStyle:w,styles:v}=ae(t);function l(s){let e=s;for(;e;){if(x.get(e))return e;e=e.firstElementChild}return null}const a=new Map;function u(s){const e=x.get(s);e&&(e.getSnapshot(e.options,!0),e.setActive("exit",!1))}q(()=>{a.forEach((s,e)=>{const p=x.get(e);p&&p.unmount(!0)}),a.clear()});function f(s,e){var p;const c=l(s),n=x.get(c);if(!n){e(),a.size===0&&((p=t.onExitComplete)==null||p.call(t));return}const I=function(P){var _,k;if(c.isConnected&&(_=P?.detail)!=null&&_.isExit){const b=n.visualElement.projection;if(b?.currentAnimation&&b.currentAnimation.state==="running"&&!n.options.exit||n.isExiting)return;c.removeEventListener("motioncomplete",I),a.delete(c),a.size===0&&((k=t.onExitComplete)==null||k.call(t)),v.has(n)&&w(n),n.getSnapshot(n.options,!1),e(),c.isConnected?n.didUpdate():n.unmount(!0)}};a.set(c,!0),g(n),c.addEventListener("motioncomplete",I),n.setActive("exit",!0),n.getSnapshot(n.options,!1),n.didUpdate()}const o=C(()=>t.mode!=="wait"?{tag:t.as}:{mode:t.mode==="wait"?"out-in":void 0});return(s,e)=>(h(),y(z(s.mode==="wait"?U:j),E({css:!1},o.value,{appear:"",onLeave:f,onEnter:u}),{default:m(()=>[M(s.$slots,"default")]),_:3},16))}}),oe={slots:{base:"rounded-md w-full",overlay:"fixed inset-0 bg-default/75 backdrop-blur-sm will-change-opacity",content:"fixed inset-0 flex items-center justify-center cursor-zoom-out focus:outline-none",zoomedImage:"w-full h-auto max-w-[95vw] max-h-[95vh] object-contain rounded-md"},variants:{zoom:{true:"will-change-transform"},open:{true:""}},compoundVariants:[{zoom:!0,open:!1,class:"cursor-zoom-in"}]},se=["onClick"],ue=Object.assign({inheritAttrs:!1},{__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,required:!0},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},class:{type:null,required:!1},zoom:{type:Boolean,required:!1,default:!0},ui:{type:null,required:!1}},setup(r){const t=r,g=B(),[w,v]=T(),[l,a]=T(),u=N(!1),f=C(()=>$({extend:$(oe),...g.ui?.prose?.img||{}})({zoom:t.zoom,open:u.value})),o=C(()=>{if(t.src?.startsWith("/")&&!t.src.startsWith("//")){const e=V(O(F().app.baseURL));if(e!=="/"&&!t.src.startsWith(e))return H(e,t.src)}return t.src}),s=C(()=>`${o.value}::${X()}`);return t.zoom&&Z(window,"scroll",()=>{u.value=!1}),(e,p)=>(h(),L(G,null,[d(i(w),null,{default:m(()=>[(h(),y(z(i(A)),E({src:o.value,alt:r.alt,width:r.width,height:r.height},e.$attrs,{class:f.value.base({class:[t.ui?.base,t.class]})}),null,16,["src","alt","width","height","class"]))]),_:1}),d(i(l),null,{default:m(()=>[(h(),y(z(i(A)),E({src:o.value,alt:r.alt},e.$attrs,{class:f.value.zoomedImage({class:[t.ui?.zoomedImage]})}),null,16,["src","alt","class"]))]),_:1}),r.zoom?(h(),y(i(Q),{key:0,open:u.value,"onUpdate:open":p[0]||(p[0]=c=>u.value=c),modal:!1},{default:m(({close:c})=>[d(i(J),{"as-child":""},{default:m(()=>[d(i(S),{"layout-id":s.value,"as-child":"",transition:{type:"spring",bounce:.15,duration:.5,ease:"easeInOut"}},{default:m(()=>[d(i(v))]),_:1},8,["layout-id"])]),_:1}),d(i(K),null,{default:m(()=>[d(i(ne),null,{default:m(()=>[u.value?(h(),y(i(S),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:D(f.value.overlay({class:[t.ui?.overlay]}))},null,8,["class"])):R("",!0),u.value?(h(),L("div",{key:1,class:D(f.value.content({class:[t.ui?.content]})),onClick:c},[d(i(S),{"as-child":"","layout-id":s.value,transition:{type:"spring",bounce:.15,duration:.5,ease:"easeInOut"}},{default:m(()=>[d(i(a))]),_:1},8,["layout-id"])],10,se)):R("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["open"])):(h(),y(i(v),{key:1}))],64))}});export{ue as default};
