import{c as p,bc as le,l as ce,H as ue,K as S,N as de,b as P,r as w,o as f,n as b,e as r,J as pe,L as M,_ as me,j as G,aN as fe,Q as D,f as j,t as m,d as k,k as y,U as K,i as h,B as W,h as q,z as T,x as J,V as Q,F as ge,p as X,bd as ve,m as _e,b8 as he,aO as F,ap as U,w as N,q as ye,be,W as Pe,s as xe,aX as Ce,C as ke,aS as we,v as Te,bf as Ie,u as H,D as E,bg as V}from"./BsxkUgj_.js";import{_ as $e}from"./sBO0YhkG.js";import{h as z}from"./1m1goCJg.js";import{M as je}from"./VpRiK65j.js";import"./iik6CYzq.js";function Y(s,o,n=0){const u={title:"label",path:"to"},a=Object.keys(s).reduce((i,d)=>{if(s[d]){const x=u[d]||d;i[x]=s[d]}return i},{});return Array.isArray(s.children)?a.children=s.children.map(i=>Y(i,o,n+1)):a.children=[],a}function Le(s,o){return s.map(n=>Y(n,o))}const Z=["ProseA","ProseAccordion","ProseAccordionItem","ProseBadge","ProseBlockquote","ProseCallout","ProseCard","ProseCardGroup","ProseCode","ProseCodeCollapse","ProseCodeGroup","ProseCodeIcon","ProseCodePreview","ProseCodeTree","ProseCollapsible","ProseEm","ProseField","ProseFieldGroup","ProseH1","ProseH2","ProseH3","ProseH4","ProseHr","ProseIcon","ProseImg","ProseKbd","ProseLi","ProseOl","ProseP","ProsePre","ProseScript","ProseSteps","ProseStrong","ProseTable","ProseTabs","ProseTabsItem","ProseTbody","ProseTd","ProseTh","ProseThead","ProseTr","ProseUl","ProseCaution","ProseNote","ProseTip","ProseWarning","ProseH5","ProseH6","Icon"],ee=[],Se=Object.freeze(Object.defineProperty({__proto__:null,globalComponents:Z,localComponents:ee},Symbol.toStringTag,{value:"Module"})),De={__name:"ContentRenderer",props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},prose:{type:Boolean,default:void 0},class:{type:[String,Object],default:void 0},unwrap:{type:[Boolean,String],default:!1}},setup(s){const o=["render","ssrRender","__ssrInlineRender"],n=s,u=!0,a=p(()=>{let e=n.value.body||n.value;return n.excerpt&&n.value.excerpt&&(e=n.value.excerpt),e.type==="minimal"||e.type==="minimark"?le({value:e.value}):e}),i=p(()=>!a.value?.children?.length),d=p(()=>{const{body:e,excerpt:l,...c}=n.value;return{...c,...n.data}}),x=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(e=>[e,`prose-${e}`])),{mdc:t}=ce().public||{},I=p(()=>n.data.mdc),C=p(()=>({...t?.components?.prose&&n.prose!==!1?x:{},...t?.components?.map||{},...ue(I.value?.components||{}),...n.components})),A=p(()=>a.value?L(a.value,{tags:C.value}):{});function O(e){let l=e;if(typeof e=="string"){if(z.includes(e))return e;if(Z.includes(S(e))?l=pe(e,!1):ee.includes(S(e))&&(l=M(()=>me(()=>Promise.resolve().then(()=>Se),void 0,import.meta.url).then(g=>{const v=g[S(e)];return v?v():void 0}))),typeof l=="string")return l}if(!l)return l;const c=l;return"__asyncLoader"in c?c:"setup"in c?M(()=>Promise.resolve(c)):c}function L(e,l){if(!e)return;const c=Array.from(new Set($(e,l))),_={};for(const[g,v]of c)if(!_[g]){if(typeof v=="object"&&o.some(B=>Object.hasOwnProperty.call(v,B))){_[g]=v;continue}_[g]=O(v)}return _}function $(e,l){const c=e.tag;if(e.type==="text"||c==="binding"||e.type==="comment")return[];const _=R(e,l.tags),g=[];e.type!=="root"&&!z.includes(_)&&g.push([c,_]);for(const v of e.children||[])g.push(...$(v,l));return g}function R(e,l){const c=e.tag;return!c||typeof e.props?.__ignoreMap<"u"?c:l[c]||l[S(c)]||l[de(e.tag)]||c}return(e,l)=>i.value?w(e.$slots,"empty",{key:1,body:a.value,data:d.value,dataContentId:r(u)?s.value.id:void 0}):(f(),P(je,{key:0,body:a.value,data:d.value,class:b(n.class),tag:n.tag,prose:n.prose,unwrap:n.unwrap,components:A.value,"data-content-id":r(u)?s.value.id:void 0},null,8,["body","data","class","tag","prose","unwrap","components","data-content-id"]))}},Ae=Object.assign(De,{__name:"ContentRenderer"}),Oe={slots:{root:"grid grid-cols-1 sm:grid-cols-2 gap-8",link:["group block px-6 py-8 rounded-lg border border-default hover:bg-elevated/50 focus-visible:outline-primary","transition-colors"],linkLeading:["inline-flex items-center rounded-full p-1.5 bg-elevated group-hover:bg-primary/10 ring ring-accented mb-4 group-hover:ring-primary/50","transition"],linkLeadingIcon:["size-5 shrink-0 text-highlighted group-hover:text-primary","transition-[color,translate]"],linkTitle:"font-medium text-[15px] text-highlighted mb-1 truncate",linkDescription:"text-sm text-muted line-clamp-2"},variants:{direction:{left:{linkLeadingIcon:["group-active:-translate-x-0.5"]},right:{link:"text-right",linkLeadingIcon:["group-active:translate-x-0.5"]}}}},Re={key:1,class:"hidden lg:block"},Be=Object.assign({inheritAttrs:!1},{__name:"UContentSurround",props:{as:{type:null,required:!1},prevIcon:{type:null,required:!1},nextIcon:{type:null,required:!1},surround:{type:Array,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(s){const o=s,n=G(),[u,a]=fe({props:{link:Object,icon:String,direction:String}}),i=p(()=>D({extend:D(Oe),...n.ui?.contentSurround||{}})());return(d,x)=>(f(),j(ge,null,[m(r(u),null,{default:y(({link:t,icon:I,direction:C})=>[t?(f(),P(K,{key:0,to:t.path,raw:"","data-slot":"link",class:b(i.value.link({class:[o.ui?.link,t.ui?.link,t.class],direction:C}))},{default:y(()=>[w(d.$slots,"link",{link:t,ui:i.value},()=>[h("div",{"data-slot":"linkLeading",class:b(i.value.linkLeading({class:[o.ui?.linkLeading,t.ui?.linkLeading]}))},[w(d.$slots,"link-leading",{link:t,ui:i.value},()=>[m(W,{name:t.icon||I,"data-slot":"linkLeadingIcon",class:b(i.value.linkLeadingIcon({class:[o.ui?.linkLeadingIcon,t.ui?.linkLeadingIcon],direction:C}))},null,8,["name","class"])])],2),h("p",{"data-slot":"linkTitle",class:b(i.value.linkTitle({class:[o.ui?.linkTitle,t.ui?.linkTitle]}))},[w(d.$slots,"link-title",{link:t,ui:i.value},()=>[q(T(t.title),1)])],2),h("p",{"data-slot":"linkDescription",class:b(i.value.linkDescription({class:[o.ui?.linkDescription,t.ui?.linkDescription]}))},[w(d.$slots,"link-description",{link:t,ui:i.value},()=>[q(T(t.description),1)])],2)])]),_:2},1032,["to","class"])):(f(),j("span",Re,"Â "))]),_:3}),s.surround?(f(),P(r(Q),J({key:0,as:s.as},d.$attrs,{"data-slot":"root",class:i.value.root({class:[o.ui?.root,o.class]})}),{default:y(()=>[m(r(a),{link:s.surround[0],icon:s.prevIcon||r(n).ui.icons.arrowLeft,direction:"left"},null,8,["link","icon"]),m(r(a),{link:s.surround[1],icon:s.nextIcon||r(n).ui.icons.arrowRight,direction:"right"},null,8,["link","icon"])]),_:1},16,["as","class"])):k("",!0)],64))}}),Fe={base:"mt-8 pb-24 space-y-12"},Ue={__name:"UPageBody",props:{as:{type:null,required:!1},class:{type:null,required:!1}},setup(s){const o=s,n=G(),u=p(()=>D({extend:D(Fe),...n.ui?.pageBody||{}}));return(a,i)=>(f(),P(r(Q),{as:s.as,class:b(u.value({class:o.class}))},{default:y(()=>[w(a.$slots,"default")]),_:3},8,["as","class"]))}},qe=s=>{const{locale:o}=X();return new Date(s).toLocaleDateString(o.value,{year:"numeric",month:"short",day:"numeric"})};function Me(s,o="Copied to clipboard"){const n=ve();navigator.clipboard.writeText(s).then(()=>{n.add({title:o,color:"success",icon:"i-lucide-check-circle"})})}function te(s,o,n){return!s?.length||!o?[]:s.reduce((u,a)=>(o&&(o+"/").startsWith(a.path+"/")&&((o!==a.path||n?.current||n?.indexAsChild)&&u.push(a),a.children&&u.push(...te(a.children.filter(i=>i.path!==a.path||i.path===o&&n?.current&&n?.indexAsChild),o,n))),u),[])}const Ne={class:"flex flex-col gap-3 mt-8"},He={class:"flex text-xs text-muted items-center justify-center gap-2"},Ee={key:0},Ve={key:1},ze={key:2},Ge={class:"text-4xl text-center font-medium max-w-3xl mx-auto mt-4"},Ke={class:"text-muted text-center max-w-2xl mx-auto"},We={class:"flex items-center justify-center gap-2 mt-2"},Je={class:"flex items-center justify-end gap-2 text-sm text-muted"},nt=_e({__name:"[...slug]",async setup(s){let o,n;const u=he(),{locale:a}=X(),i=p(()=>Array.isArray(u.params.slug)?u.params.slug:[u.params.slug]),d=p(()=>F(U(a.value,...i.value))),x=p(()=>`blog_${a.value}`),{data:t}=([o,n]=N(async()=>H(d.value,async()=>{const e=await E(x.value).path(`/${a.value}/blog/${i.value}`).first();return!e&&a.value!=="en"?await E("blog_en").path(F(U("en",...i.value))).first():e},{watch:[a,()=>u.fullPath]})),o=await o,n(),o);if(!t.value)throw ye({statusCode:404,statusMessage:"Page not found",fatal:!0});const{data:I}=([o,n]=N(async()=>H(`${d.value}-surround`,async()=>{const e=await V(`blog_${a.value}`,d.value,{fields:["description"]});return!e&&a.value!=="en"?await V("blog_en",F(U("en",...i.value)),{fields:["description"]}):e},{watch:[a,()=>u.fullPath]})),o=await o,n(),o),C=be("navigation",Pe([])),A=p(()=>C.value.find(e=>e.path===`${a.value}/blog`)?.children||[]),O=p(()=>Le(te(A?.value,t.value?.path)).map(({icon:e,...l})=>l));t.value.image?(t.value.image,void 0):(O.value.map(e=>e.label).join(" > "),void 0);const L=t.value?.seo?.title||t.value?.title,$=t.value?.seo?.description||t.value?.description;xe({title:L,description:$,ogDescription:$,ogTitle:L});const R=p(()=>`${window?.location}`);return(e,l)=>{const c=W,_=K,g=we,v=$e,B=Ae,ne=Te,oe=Be,ae=Ue,se=ke,re=Ce,ie=Ie;return f(),P(ie,{class:"mt-20 px-2"},{default:y(()=>[m(re,{class:"relative min-h-screen"},{default:y(()=>[r(t)?(f(),P(se,{key:0},{default:y(()=>[m(_,{to:"/blog",class:"text-sm flex items-center gap-1"},{default:y(()=>[m(c,{name:"lucide:chevron-left"}),l[1]||(l[1]=q(" Blog ",-1))]),_:1}),h("div",Ne,[h("div",He,[r(t).date?(f(),j("span",Ee,T(("formatDate"in e?e.formatDate:r(qe))(r(t).date)),1)):k("",!0),r(t).date&&r(t).minRead?(f(),j("span",Ve," - ")):k("",!0),r(t).minRead?(f(),j("span",ze,T(r(t).minRead)+" MIN READ ",1)):k("",!0)]),m(g,{src:r(t).image,alt:r(t).title,class:"rounded-lg w-full h-[300px] object-cover object-center"},null,8,["src","alt"]),h("h1",Ge,T(r(t).title),1),h("p",Ke,T(r(t).description),1),h("div",We,[m(v,J({orientation:"vertical",color:"neutral",variant:"outline",class:"justify-center items-center text-center"},r(t).author),null,16)])]),m(ae,{class:"max-w-3xl mx-auto"},{default:y(()=>[r(t).body?(f(),P(B,{key:0,value:r(t)},null,8,["value"])):k("",!0),h("div",Je,[m(ne,{size:"sm",variant:"link",color:"neutral",label:"Copy link",onClick:l[0]||(l[0]=Qe=>("copyToClipboard"in e?e.copyToClipboard:r(Me))(r(R),"Article link copied to clipboard"))})]),m(oe,{surround:r(I)},null,8,["surround"])]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})}}});export{nt as default};
