import{A as J,R as X,f as F,c as p,S as v,T as x,w as U,B as G,aN as Q,L as Y,C as Z,b as y,o as m,l as f,v as u,U as ee,d as g,e as n,J as te,j as h,y as ae,i as ne,H as se,z as _,h as b,I as oe,s as re,W as ce,u as j,K as A,X as I}from"./GLR3qyDg.js";import{_ as le}from"./CAUdypWp.js";import{d as ie,a as ue,_ as me,b as _e,c as de,e as pe}from"./Dfs86ljQ.js";import{f as fe}from"./bmUg1beg.js";import"./1m1goCJg.js";import"./pOxcUxK3.js";import"./iik6CYzq.js";function N(r,a,s=0){const c={title:"label",path:"to"},t=Object.keys(r).reduce((l,i)=>{if(r[i]){const d=c[i]||i;l[d]=r[i]}return l},{});return Array.isArray(r.children)?t.children=r.children.map(l=>N(l,a,s+1)):t.children=[],t}function ge(r,a){return r.map(s=>N(s,a))}function B(r,a,s){return!r?.length||!a?[]:r.reduce((c,t)=>(a&&(a+"/").startsWith(t.path+"/")&&((a!==t.path||s?.current||s?.indexAsChild)&&c.push(t),t.children&&c.push(...B(t.children.filter(l=>l.path!==t.path||l.path===a&&s?.current&&s?.indexAsChild),a,s))),c),[])}const he={class:"flex flex-col gap-3 mt-8"},ve={class:"flex text-xs text-muted items-center justify-center gap-2"},xe={key:0},ye={key:1},be={key:2},we={class:"text-4xl text-center font-medium max-w-3xl mx-auto mt-4"},Ce={class:"text-muted text-center max-w-2xl mx-auto"},$e={class:"flex items-center justify-center gap-2 mt-2"},Pe=J({__name:"[...slug]",async setup(r){let a,s;const c=X(),{locale:t,t:l}=F(),i=p(()=>Array.isArray(c.params.slug)?c.params.slug:[c.params.slug]),d=p(()=>v(x(t.value,...i.value))),R=p(()=>`blog_${t.value}`),{data:e}=([a,s]=U(async()=>j(d.value,async()=>{const o=await A(R.value).path(`/${t.value}/blog/${i.value}`).first();return!o&&t.value!=="en"?await A("blog_en").path(v(x("en",...i.value))).first():o},{watch:[t,()=>c.fullPath]})),a=await a,s(),a);if(!e.value)throw G({statusCode:404,statusMessage:l("error.title"),fatal:!0});const{data:P}=([a,s]=U(async()=>j(`${d.value}-surround`,async()=>{const o=await I(`blog_${t.value}`,d.value,{fields:["description"]});return!o&&t.value!=="en"?await I("blog_en",v(x("en",...i.value)),{fields:["description"]}):o},{watch:[t,()=>c.fullPath]})),a=await a,s(),a),S=Q("navigation",Y([])),D=p(()=>S.value.find(o=>o.path===`${t.value}/blog`)?.children||[]),L=p(()=>ge(B(D?.value,e.value?.path)).map(({icon:o,...$})=>$));e.value.image?ie({url:e.value.image}):ue("Blog",{headline:L.value.map(o=>o.label).join(" > ")},{});const w=e.value?.seo?.title||e.value?.title,C=e.value?.seo?.description||e.value?.description;return Z({title:w,description:C,ogDescription:C,ogTitle:w}),(o,$)=>{const M=se,V=ae,O=oe,T=le,k=_e,q=de,E=pe,K=me,W=te,z=ee,H=ce;return m(),y(H,{class:"mt-20 px-2"},{default:f(()=>[u(z,{class:"relative min-h-screen"},{default:f(()=>[n(e)?(m(),y(W,{key:0},{default:f(()=>[u(V,{to:"/blog",class:"text-sm flex items-center gap-1"},{default:f(()=>[u(M,{name:"lucide:chevron-left"}),ne(" "+_(n(l)("blog.title")),1)]),_:1}),h("div",he,[h("div",ve,[n(e).date?(m(),b("span",xe,_(("formatDate"in o?o.formatDate:n(fe))(n(e).date)),1)):g("",!0),n(e).date&&n(e).minRead?(m(),b("span",ye," - ")):g("",!0),n(e).minRead?(m(),b("span",be,_(n(e).minRead)+" "+_(n(l)("blog.minRead")),1)):g("",!0)]),u(O,{src:n(e).image,alt:n(e).title,class:"rounded-lg w-full h-75 object-cover object-center"},null,8,["src","alt"]),h("h1",we,_(n(e).title),1),h("p",Ce,_(n(e).description),1),h("div",$e,[u(T,re({orientation:"vertical",color:"neutral",variant:"outline",class:"justify-center items-center text-center"},n(e).author),null,16)])]),u(K,{class:"max-w-3xl mx-auto"},{default:f(()=>[n(e).body?(m(),y(k,{key:0,value:n(e)},null,8,["value"])):g("",!0),u(q,{type:"article"}),u(E,{surround:n(P)},null,8,["surround"])]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})}}});export{Pe as default};
