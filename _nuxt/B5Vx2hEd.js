import{v as m,c as d}from"./DiSdba7R.js";import{d as b,h as P,e as v,i as A,p as M,s as B}from"./DiSdba7R.js";import{T as H,f as j,i as L,a as _,b as E,n as G,u as U}from"./iik6CYzq.js";import"./lFahm4q_.js";import"./BKZ8r7iz.js";import"./CkGsYvhA.js";import"./1m1goCJg.js";function S(i){const t=i;return async r=>{const a=[],h=[];m(r,s=>{const e=s;if(!["pre","code"].includes(e.tagName))return!1;const o=e.properties?.language!==void 0&&e.properties?.language!=="text",n=!!e.properties?.highlights;return o||n},s=>{const e=s,o=typeof e.properties.highlights=="string"?e.properties.highlights.split(/[,\s]+/).map(Number):Array.isArray(e.properties.highlights)?e.properties.highlights.map(Number):[],n=t.highlighter(d(s),e.properties.language,t.theme,{highlights:o.filter(Boolean),meta:e.properties.meta}).then(({tree:p,className:g,style:l,inlineStyle:c})=>{e.properties.className=((e.properties.className||"")+" "+g).trim(),e.properties.style=((e.properties.style||"")+" "+c).trim(),e.children[0]?.tagName==="code"?e.children[0].children=p:e.children=p[0].children||p,l&&h.push(l)});a.push(n)}),a.length&&(await Promise.all(a),r.children.push({type:"element",tagName:"style",children:[{type:"text",value:f(h.join(""))}],properties:{}}))}}const f=i=>{const t=i.split("}").filter(r=>!!r.trim()).map(r=>r.trim()+"}");return Array.from(new Set(t)).join("")};export{H as TEXT_TAGS,b as createMarkdownParser,P as createMarkdownStringifier,v as createParseProcessor,A as createStringifyProcessor,j as flatUnwrap,L as isTag,_ as isText,E as nodeChildren,G as nodeTextContent,M as parseMarkdown,S as rehypeHighlight,B as stringifyMarkdown,U as unwrap};
