import{b as q,t as y,w as S,N as T,c as B,o as N,I as v}from"./BSyAYQB-.js";import{D as $,a as j,b as L}from"./C8jeutaN.js";import{c as b,a as P,M as d,_ as V}from"./CkGsYvhA.js";import{f as W,c as f,a4 as A,R as w,A as l,V as t,z as r,B as s,D as z,E as I,u as e,P as k,Q as C,W as E}from"./BKZ8r7iz.js";const O={slots:{base:"rounded-md w-full",overlay:"fixed inset-0 bg-default/75 backdrop-blur-sm will-change-opacity",content:"fixed inset-0 flex items-center justify-center cursor-zoom-out focus:outline-none",zoomedImage:"w-full h-auto max-w-[95vw] max-h-[95vh] object-contain rounded-md"},variants:{zoom:{true:"will-change-transform"},open:{true:""}},compoundVariants:[{zoom:!0,open:!1,class:"cursor-zoom-in"}]},U=["onClick"],G=Object.assign({inheritAttrs:!1},{__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,required:!0},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},class:{type:null,required:!1},zoom:{type:Boolean,required:!1,default:!0},ui:{type:null,required:!1}},setup(o){const a=o,_=q(),[x,p]=b(),[D,R]=b(),n=W(!1),u=f(()=>y({extend:y(O),..._.ui?.prose?.img||{}})({zoom:a.zoom,open:n.value})),c=f(()=>{if(a.src?.startsWith("/")&&!a.src.startsWith("//")){const i=S(T(B().app.baseURL));if(i!=="/"&&!a.src.startsWith(i))return N(i,a.src)}return a.src}),g=f(()=>`${c.value}::${A()}`);return a.zoom&&P(window,"scroll",()=>{n.value=!1}),(i,h)=>(l(),w(E,null,[t(e(x),null,{default:s(()=>[(l(),r(I(e(v)),z({src:c.value,alt:o.alt,width:o.width,height:o.height},i.$attrs,{class:u.value.base({class:[a.ui?.base,a.class]})}),null,16,["src","alt","width","height","class"]))]),_:1}),t(e(D),null,{default:s(()=>[(l(),r(I(e(v)),z({src:c.value,alt:o.alt},i.$attrs,{class:u.value.zoomedImage({class:[a.ui?.zoomedImage]})}),null,16,["src","alt","class"]))]),_:1}),o.zoom?(l(),r(e(L),{key:0,open:n.value,"onUpdate:open":h[0]||(h[0]=m=>n.value=m),modal:!1},{default:s(({close:m})=>[t(e($),{"as-child":""},{default:s(()=>[t(e(d),{"layout-id":g.value,"as-child":"",transition:{type:"spring",bounce:.15,duration:.5,ease:"easeInOut"}},{default:s(()=>[t(e(p))]),_:1},8,["layout-id"])]),_:1}),t(e(j),null,{default:s(()=>[t(e(V),null,{default:s(()=>[n.value?(l(),r(e(d),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:C(u.value.overlay({class:[a.ui?.overlay]}))},null,8,["class"])):k("",!0),n.value?(l(),w("div",{key:1,class:C(u.value.content({class:[a.ui?.content]})),onClick:m},[t(e(d),{"as-child":"","layout-id":g.value,transition:{type:"spring",bounce:.15,duration:.5,ease:"easeInOut"}},{default:s(()=>[t(e(R))]),_:1},8,["layout-id"])],10,U)):k("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["open"])):(l(),r(e(p),{key:1}))],64))}});export{G as default};
