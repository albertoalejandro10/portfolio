import{m as Y,u as F,d as G,e as J,n as Q,a as U,w as v,o as x,q as j,p as A,r as X,f as Z,j as ee,k as te,I as ae}from"./DDU5pMrJ.js";import{_ as ne}from"./CrSeTWbI.js";import{d as se,a as oe,_ as re,b as ce,c as le,e as ie}from"./CRnHRSto.js";import{f as ue}from"./3SvziigX.js";import{m as me,c as p,O as I,v as _e,f as de,z as y,B as f,A as m,V as u,P as g,u as n,U as h,S as pe,Y as _,R as w,D as fe}from"./BKZ8r7iz.js";import"./CkGsYvhA.js";import"./1m1goCJg.js";import"./3UNy0Xoe.js";import"./iik6CYzq.js";function B(r,a,s=0){const c={title:"label",path:"to"},t=Object.keys(r).reduce((l,i)=>{if(r[i]){const d=c[i]||i;l[d]=r[i]}return l},{});return Array.isArray(r.children)?t.children=r.children.map(l=>B(l,a,s+1)):t.children=[],t}function ge(r,a){return r.map(s=>B(s,a))}function N(r,a,s){return!r?.length||!a?[]:r.reduce((c,t)=>(a&&(a+"/").startsWith(t.path+"/")&&((a!==t.path||s?.current||s?.indexAsChild)&&c.push(t),t.children&&c.push(...N(t.children.filter(l=>l.path!==t.path||l.path===a&&s?.current&&s?.indexAsChild),a,s))),c),[])}const he={class:"flex flex-col gap-3 mt-8"},ve={class:"flex text-xs text-muted items-center justify-center gap-2"},xe={key:0},ye={key:1},we={key:2},be={class:"text-4xl text-center font-medium max-w-3xl mx-auto mt-4"},Ce={class:"text-muted text-center max-w-2xl mx-auto"},$e={class:"flex items-center justify-center gap-2 mt-2"},Se=me({__name:"[...slug]",async setup(r){let a,s;const c=Y(),{locale:t,t:l}=F(),i=p(()=>Array.isArray(c.params.slug)?c.params.slug:[c.params.slug]),d=p(()=>v(x(t.value,...i.value))),P=p(()=>`blog_${t.value}`),{data:e}=([a,s]=I(async()=>U(d.value,async()=>{const o=await j(P.value).path(`/${t.value}/blog/${i.value}`).first();return!o&&t.value!=="en"?await j("blog_en").path(v(x("en",...i.value))).first():o},{watch:[t,()=>c.fullPath]})),a=await a,s(),a);if(!e.value)throw G({statusCode:404,statusMessage:l("error.title"),fatal:!0});const{data:R}=([a,s]=I(async()=>U(`${d.value}-surround`,async()=>{const o=await A(`blog_${t.value}`,d.value,{fields:["description"]});return!o&&t.value!=="en"?await A("blog_en",v(x("en",...i.value)),{fields:["description"]}):o},{watch:[t,()=>c.fullPath]})),a=await a,s(),a),D=_e("navigation",de([])),S=p(()=>D.value.find(o=>o.path===`${t.value}/blog`)?.children||[]),V=p(()=>ge(N(S?.value,e.value?.path)).map(({icon:o,...$})=>$));e.value.image?se({url:e.value.image}):oe("Blog",{headline:V.value.map(o=>o.label).join(" > ")},{});const b=e.value?.seo?.title||e.value?.title,C=e.value?.seo?.description||e.value?.description;return J({title:b,meta:[{name:"description",content:C},{property:"og:description",content:C},{property:"og:title",content:b},{name:"twitter:card",content:"summary_large_image"}]}),(o,$)=>{const O=te,k=ee,q=ae,L=ne,M=ce,E=le,z=ie,H=re,K=Z,T=X,W=Q;return m(),y(W,{class:"mt-20 px-2"},{default:f(()=>[u(T,{class:"relative min-h-screen"},{default:f(()=>[n(e)?(m(),y(K,{key:0},{default:f(()=>[u(k,{to:"/blog",class:"text-sm flex items-center gap-1"},{default:f(()=>[u(O,{name:"lucide:chevron-left"}),pe(" "+_(n(l)("blog.title")),1)]),_:1}),h("div",he,[h("div",ve,[n(e).date?(m(),w("span",xe,_(("formatDate"in o?o.formatDate:n(ue))(n(e).date)),1)):g("",!0),n(e).date&&n(e).minRead?(m(),w("span",ye," - ")):g("",!0),n(e).minRead?(m(),w("span",we,_(n(e).minRead)+" "+_(n(l)("blog.minRead")),1)):g("",!0)]),u(q,{src:n(e).image,alt:n(e).title,class:"rounded-lg w-full h-75 object-cover object-center"},null,8,["src","alt"]),h("h1",be,_(n(e).title),1),h("p",Ce,_(n(e).description),1),h("div",$e,[u(L,fe({orientation:"vertical",color:"neutral",variant:"outline",class:"justify-center items-center text-center"},n(e).author),null,16)])]),u(H,{class:"max-w-3xl mx-auto"},{default:f(()=>[n(e).body?(m(),y(M,{key:0,value:n(e)},null,8,["value"])):g("",!0),u(E,{type:"article"}),u(z,{surround:n(R)},null,8,["surround"])]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})}}});export{Se as default};
